(this.webpackJsonpnetfix=this.webpackJsonpnetfix||[]).push([[0],{69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},87:function(e,t,c){"use strict";c.r(t);var a=c(2),s=c.n(a),n=c(28),i=c.n(n),r=(c(69),c(17)),o=(c(70),c(71),c(106)),j=c(100),d=c(40),l=c.n(d),b=c(101),h=c(102),u=c(103),O=c(104),m=c(11),p=c(35),x=p.a.initializeApp({apiKey:"AIzaSyDMl54JGgu0EU411JtysNDjJphCqqyf-FA",authDomain:"whatts-app-clone-1aef2.firebaseapp.com",projectId:"whatts-app-clone-1aef2",storageBucket:"whatts-app-clone-1aef2.appspot.com",messagingSenderId:"991791830791",appId:"1:991791830791:web:fb777054634be525b817a2",measurementId:"G-2W6SZSQSYQ"}),f=x.firestore(),v=x.auth(),g=new p.a.auth.GoogleAuthProvider,N=f,S=c(4),_=Object(a.createContext)(),y=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(S.jsx)(_.Provider,{value:Object(a.useReducer)(t,c),children:s})},C=function(){return Object(a.useContext)(_)};var w=function(){var e,t,c=Object(a.useState)(""),s=Object(r.a)(c,2),n=s[0],i=s[1],d=Object(a.useState)(""),x=Object(r.a)(d,2),f=x[0],v=x[1],g=Object(m.f)().roomId,_=Object(a.useState)(""),y=Object(r.a)(_,2),w=y[0],I=y[1],D=Object(a.useState)([]),E=Object(r.a)(D,2),M=E[0],P=E[1],T=C(),k=Object(r.a)(T,2),F=k[0].user;return k[1],Object(a.useEffect)((function(){g&&(N.collection("rooms").doc(g).onSnapshot((function(e){return I(e.data().name)})),N.collection("rooms").doc(g).collection("Messages").orderBy("timestamp","asc").onSnapshot((function(e){P(e.docs.map((function(e){return e.data()})))})))}),[g]),Object(a.useEffect)((function(){i(Math.floor(5e3*Math.random())),console.log(n)}),[]),Object(S.jsxs)("div",{className:"chat",children:[Object(S.jsxs)("div",{className:"chat_header",children:[Object(S.jsx)(o.a,{src:"https://avatars.dicebear.com/api/human/".concat(n,".svg")}),Object(S.jsxs)("div",{className:"chat_headerinfo",children:[Object(S.jsx)("h3",{children:w}),Object(S.jsxs)("p",{className:"chat-room-last-seen",children:["Last seen "," ",new Date(null===(e=M[M.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(S.jsxs)("div",{className:"chat_heaserright",children:[Object(S.jsx)(j.a,{children:Object(S.jsx)(b.a,{})}),Object(S.jsx)(j.a,{children:Object(S.jsx)(h.a,{})}),Object(S.jsx)(j.a,{children:Object(S.jsx)(l.a,{})})]})]}),Object(S.jsx)("div",{className:"chat_body",children:M.map((function(e){var t;return Object(S.jsxs)("p",{className:"chat_message ".concat(e.name==F.displayName&&"chat_receiver"),children:[Object(S.jsx)("span",{className:"chat_peoplename",children:e.name}),e.message,Object(S.jsx)("span",{className:"chat_bodytimestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(S.jsxs)("div",{className:"chat_search",children:[Object(S.jsx)(u.a,{}),Object(S.jsxs)("form",{className:"footer_form",children:[Object(S.jsx)("input",{value:f,onChange:function(e){v(e.target.value)},type:"text",placeholder:"Type here....."}),Object(S.jsx)("button",{onClick:function(e){e.preventDefault(),console.log("You typeds",f),N.collection("rooms").doc(g).collection("Messages").add({message:f,name:F.displayName,timestamp:p.a.firestore.FieldValue.serverTimestamp()}),v("")},type:"submit",children:"search"})]}),Object(S.jsx)(O.a,{})]})]})},I=(c(83),c(57)),D=c.n(I),E=c(58),M=c.n(E),P=(c(84),c(32));var T=function(e){var t,c=e.app,s=e.id,n=e.name,i=Object(a.useState)(""),j=Object(r.a)(i,2),d=j[0],l=j[1],b=Object(a.useState)(""),h=Object(r.a)(b,2),u=h[0],O=h[1];return Object(a.useEffect)((function(){s&&N.collection("rooms").doc(s).collection("Messages").orderBy("timestamp","desc").onSnapshot((function(e){O(e.docs.map((function(e){return e.data()})))}))}),[s]),Object(a.useEffect)((function(){l(Math.floor(5e3*Math.random())),console.log(d)}),[]),c?Object(S.jsx)("div",{onClick:function(){var e=prompt("Please enter your name ");e&&N.collection("rooms").add({name:e})},className:"sidebarChat",id:"text",children:Object(S.jsx)("h2",{children:"Add New group"})}):Object(S.jsx)(P.b,{to:"/room/".concat(s),children:Object(S.jsxs)("div",{className:"sidebarChat",children:[Object(S.jsx)(o.a,{src:"https://avatars.dicebear.com/api/human/".concat(d,".svg")}),Object(S.jsxs)("div",{className:"sidebarchat_info",children:[Object(S.jsx)("h2",{children:n}),Object(S.jsx)("p",{children:null===(t=u[0])||void 0===t?void 0:t.message})]})]})})};var k=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],s=t[1];return Object(a.useEffect)((function(){N.collection("rooms").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(S.jsxs)("div",{className:"sidbar",children:[Object(S.jsxs)("div",{className:"sidbar_header",children:[Object(S.jsx)(o.a,{}),Object(S.jsxs)("div",{className:"sidebar_headerright",children:[Object(S.jsx)(j.a,{children:Object(S.jsx)(D.a,{})}),Object(S.jsx)(j.a,{children:Object(S.jsx)(M.a,{})}),Object(S.jsx)(j.a,{children:Object(S.jsx)(l.a,{})})]})]}),Object(S.jsx)("div",{className:"sidbar_search",children:Object(S.jsxs)("div",{className:"sidebar_searchContainer",children:[Object(S.jsx)(j.a,{children:Object(S.jsx)(b.a,{})}),Object(S.jsx)("input",{placeholder:"search here",type:"text"})]})}),Object(S.jsxs)("div",{className:"sidbar_chats",children:[Object(S.jsx)(T,{app:!0}),c.map((function(e){return Object(S.jsx)(T,{id:e.id,name:e.data.name},e.id)}))]})]})},F=c(59),A=c(105),B=(c(85),c(50)),J="SET_USER",L=function(e,t){switch(t.type){case J:return Object(B.a)(Object(B.a)({},e),{},{user:t.user});default:return e}};var U=function(){var e=C(),t=Object(r.a)(e,2);Object(F.a)(t[0]);var c=t[1];return Object(S.jsx)("div",{className:"login",children:Object(S.jsxs)("div",{className:"login_div",children:[Object(S.jsx)("img",{src:"./Img/\u2014Pngtree\u2014whatsapp icon design vector_4949781.png"}),Object(S.jsx)("h1",{children:"Login Page"}),Object(S.jsx)("div",{className:"login_text"}),Object(S.jsx)("div",{className:"btn",children:Object(S.jsx)(A.a,{onClick:function(){v.signInWithPopup(g).then((function(e){c({type:J,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"sign in with google"})})]})})};var G=function(){var e=C(),t=Object(r.a)(e,2),c=t[0].user;return t[1],Object(S.jsx)("div",{className:"app",children:c?Object(S.jsx)("div",{className:"app_body",children:Object(S.jsxs)(P.a,{children:[Object(S.jsx)(k,{}),Object(S.jsxs)(m.c,{children:[Object(S.jsxs)(m.a,{path:"/room/:roomId",children:["   ",Object(S.jsx)(w,{}),"  "]}),Object(S.jsxs)(m.a,{path:"/",children:["   ",Object(S.jsx)(w,{})," "]})]})]})}):Object(S.jsx)(U,{})})},q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,107)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),a(e),s(e),n(e),i(e)}))};i.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(y,{initialState:{user:null},reducer:L,children:Object(S.jsx)(G,{})})}),document.getElementById("root")),q()}},[[87,1,2]]]);
//# sourceMappingURL=main.2af2c33a.chunk.js.map